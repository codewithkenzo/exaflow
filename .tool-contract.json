{
  "name": "exa-tool",
  "version": "1.0.0",
  "description": "Unified Exa tool for Context, Search, Contents, Websets, and Research with async orchestration and resiliency patterns",
  "author": "Exa Personal Tool",
  "license": "MIT",
  "type": "cli",
  "entrypoint": "dist/cli.js",
  "runtime": "bun",
  "environment": {
    "required": ["EXA_API_KEY"],
    "optional": [
      "WEBHOOK_SECRET",
      "WEBHOOK_URL",
      "DEFAULT_TIMEOUT_MS",
      "MAX_RETRIES",
      "CONCURRENCY_LIMIT"
    ]
  },
  "commands": {
    "context": {
      "description": "Query Exa Context API for code-oriented responses",
      "arguments": [
        {
          "name": "query",
          "type": "string",
          "required": true,
          "description": "Query string for context retrieval"
        }
      ],
      "options": [
        {
          "name": "tokens",
          "type": "number",
          "default": 5000,
          "description": "Number of tokens for the response (100-50000)"
        },
        {
          "name": "timeout",
          "type": "number",
          "default": 30000,
          "description": "Request timeout in milliseconds"
        }
      ],
      "input": {
        "type": "inline"
      },
      "output": {
        "type": "json",
        "schema": {
          "type": "object",
          "properties": {
            "status": { "type": "string", "enum": ["success", "partial", "error"] },
            "taskId": { "type": "string" },
            "timing": {
              "type": "object",
              "properties": {
                "startedAt": { "type": "string", "format": "date-time" },
                "completedAt": { "type": "string", "format": "date-time" },
                "duration": { "type": "number" }
              }
            },
            "citations": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "url": { "type": "string", "format": "uri" },
                  "title": { "type": "string" },
                  "snippet": { "type": "string" },
                  "author": { "type": "string" },
                  "publishedDate": { "type": "string", "format": "date-time" },
                  "verificationReasoning": { "type": "string" }
                }
              }
            },
            "data": {
              "type": "object",
              "properties": {
                "response": { "type": "string" },
                "metadata": { "type": "object" }
              }
            }
          }
        }
      },
      "examples": [
        "exa-tool context \"React hooks examples\" --tokens 5000",
        "exa-tool context \"How to implement circuit breaker in TypeScript\" --tokens 3000"
      ]
    },
    "search": {
      "description": "Search using Exa Search API with semantic and keyword modes",
      "arguments": [
        {
          "name": "query",
          "type": "string",
          "required": false,
          "description": "Search query string (or use --input/--stdin)"
        }
      ],
      "options": [
        {
          "name": "input",
          "type": "string",
          "description": "Input file with queries (JSON or text)"
        },
        {
          "name": "stdin",
          "type": "boolean",
          "default": false,
          "description": "Read queries from stdin"
        },
        {
          "name": "type",
          "type": "string",
          "enum": ["auto", "keyword", "neural", "fast"],
          "default": "auto",
          "description": "Search type"
        },
        {
          "name": "num-results",
          "type": "number",
          "default": 10,
          "description": "Number of results to return (1-50)"
        },
        {
          "name": "include-contents",
          "type": "boolean",
          "default": false,
          "description": "Include full content in results"
        },
        {
          "name": "start-date",
          "type": "string",
          "format": "date-time",
          "description": "Start date filter (ISO 8601)"
        },
        {
          "name": "end-date",
          "type": "string",
          "format": "date-time",
          "description": "End date filter (ISO 8601)"
        },
        {
          "name": "concurrency",
          "type": "number",
          "default": 5,
          "description": "Concurrency for batch operations"
        }
      ],
      "input": {
        "type": "flexible",
        "supports": ["inline", "file", "stdin"]
      },
      "output": {
        "type": "json",
        "schema": {
          "type": "object",
          "properties": {
            "status": { "type": "string", "enum": ["success", "partial", "error"] },
            "taskId": { "type": "string" },
            "timing": { "type": "object" },
            "citations": { "type": "array" },
            "data": {
              "type": "object",
              "properties": {
                "results": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": { "type": "string" },
                      "url": { "type": "string", "format": "uri" },
                      "title": { "type": "string" },
                      "publishedDate": { "type": "string", "format": "date-time" },
                      "author": { "type": "string" },
                      "text": { "type": "string" },
                      "score": { "type": "number" }
                    }
                  }
                },
                "totalResults": { "type": "number" },
                "query": { "type": "string" }
              }
            }
          }
        }
      },
      "examples": [
        "exa-tool search \"machine learning trends 2024\" --type neural --num-results 20",
        "exa-tool search --input queries.json --concurrency 10",
        "cat queries.txt | exa-tool search --stdin --type keyword"
      ]
    },
    "contents": {
      "description": "Extract content from URLs with live crawl and subpages support",
      "options": [
        {
          "name": "ids",
          "type": "string",
          "description": "File containing URLs (one per line)"
        },
        {
          "name": "stdin",
          "type": "boolean",
          "default": false,
          "description": "Read URLs from stdin"
        },
        {
          "name": "livecrawl",
          "type": "string",
          "enum": ["always", "fallback", "never"],
          "default": "fallback",
          "description": "Live crawl mode"
        },
        {
          "name": "subpages",
          "type": "number",
          "default": 0,
          "description": "Number of subpages to crawl (0-20)"
        },
        {
          "name": "subpage-target",
          "type": "string",
          "description": "Target subpage sections (comma-separated)"
        }
      ],
      "input": {
        "type": "flexible",
        "supports": ["file", "stdin"]
      },
      "output": {
        "type": "json",
        "schema": {
          "type": "object",
          "properties": {
            "status": { "type": "string", "enum": ["success", "partial", "error"] },
            "taskId": { "type": "string" },
            "timing": { "type": "object" },
            "citations": { "type": "array" },
            "data": {
              "type": "object",
              "properties": {
                "results": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": { "type": "string" },
                      "url": { "type": "string", "format": "uri" },
                      "title": { "type": "string" },
                      "text": { "type": "string" },
                      "subpages": { "type": "array" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "examples": [
        "exa-tool contents --ids urls.txt --livecrawl always",
        "echo 'https://example.com' | exa-tool contents --stdin --subpages 5 --subpage-target 'about,news'",
        "exa-tool contents --ids urls.json --livecrawl fallback --subpages 3"
      ]
    },
    "websets": {
      "description": "Manage Exa Websets for async search and enrichment operations",
      "arguments": [
        {
          "name": "operation",
          "type": "string",
          "enum": ["create", "search", "poll", "enrich"],
          "required": true,
          "description": "Webset operation to perform"
        }
      ],
      "options": [
        {
          "name": "webset-id",
          "type": "string",
          "description": "Webset ID for search/poll/enrich operations"
        },
        {
          "name": "search-query",
          "type": "string",
          "description": "Search query for search operation"
        },
        {
          "name": "enrichment-type",
          "type": "string",
          "description": "Enrichment type for enrich operation"
        },
        {
          "name": "webhook",
          "type": "boolean",
          "default": false,
          "description": "Use webhook mode for async operations"
        },
        {
          "name": "poll",
          "type": "boolean",
          "default": false,
          "description": "Poll for completion"
        }
      ],
      "input": {
        "type": "inline"
      },
      "output": {
        "type": "json",
        "schema": {
          "type": "object",
          "properties": {
            "status": { "type": "string", "enum": ["success", "partial", "error"] },
            "taskId": { "type": "string" },
            "timing": { "type": "object" },
            "citations": { "type": "array" },
            "data": {
              "type": "object",
              "properties": {
                "webset": { "type": "object" },
                "search": { "type": "object" },
                "items": { "type": "array" },
                "message": { "type": "string" }
              }
            }
          }
        }
      },
      "examples": [
        "exa-tool websets create",
        "exa-tool websets search --webset-id abc123 --search-query \"AI research papers\"",
        "exa-tool websets poll --webset-id abc123 --poll",
        "exa-tool websets enrich --webset-id abc123 --enrichment-type \"summary\""
      ]
    },
    "research": {
      "description": "Run research tasks with Exa Research API (async multi-step pipelines)",
      "arguments": [
        {
          "name": "operation",
          "type": "string",
          "enum": ["create", "get", "list"],
          "required": false,
          "default": "create",
          "description": "Research operation to perform"
        }
      ],
      "options": [
        {
          "name": "instructions",
          "type": "string",
          "description": "Research instructions for create operation"
        },
        {
          "name": "instructions-file",
          "type": "string",
          "description": "File containing research instructions"
        },
        {
          "name": "model",
          "type": "string",
          "enum": ["exa-research", "exa-research-pro"],
          "default": "exa-research",
          "description": "Research model to use"
        },
        {
          "name": "schema",
          "type": "string",
          "description": "JSON schema file for structured output"
        },
        {
          "name": "task-id",
          "type": "string",
          "description": "Task ID for get operation"
        },
        {
          "name": "poll",
          "type": "boolean",
          "default": false,
          "description": "Poll for completion"
        }
      ],
      "input": {
        "type": "flexible",
        "supports": ["inline", "file"]
      },
      "output": {
        "type": "json",
        "schema": {
          "type": "object",
          "properties": {
            "status": { "type": "string", "enum": ["success", "partial", "error"] },
            "taskId": { "type": "string" },
            "timing": { "type": "object" },
            "citations": { "type": "array" },
            "data": {
              "type": "object",
              "properties": {
                "taskId": { "type": "string" },
                "status": { "type": "string" },
                "result": { "type": "object" },
                "error": { "type": "string" },
                "metadata": { "type": "object" }
              }
            }
          }
        }
      },
      "examples": [
        "exa-tool research --instructions \"Research the latest AI trends and summarize key findings\" --poll",
        "exa-tool research --instructions-file prompt.md --model exa-research-pro --schema output-schema.json",
        "exa-tool research get --task-id abc123",
        "exa-tool research list"
      ]
    }
  },
  "globalOptions": [
    {
      "name": "concurrency",
      "type": "number",
      "default": 5,
      "description": "Concurrency for batch operations (1-20)"
    },
    {
      "name": "timeout",
      "type": "number",
      "default": 30000,
      "description": "Request timeout in milliseconds (1000-300000)"
    },
    {
      "name": "compact",
      "type": "boolean",
      "default": false,
      "description": "Output compact JSON instead of formatted"
    },
    {
      "name": "silent",
      "type": "boolean",
      "default": false,
      "description": "Suppress event streaming to stderr"
    }
  ],
  "streaming": {
    "enabled": true,
    "format": "jsonl",
    "destination": "stderr",
    "events": [
      "task.started",
      "task.progress",
      "task.completed",
      "task.failed",
      "api.request",
      "api.response",
      "async.started",
      "async.polling",
      "async.completed",
      "batch.started",
      "batch.progress",
      "batch.completed",
      "webhook.received",
      "webhook.processed"
    ]
  },
  "errorHandling": {
    "retries": {
      "enabled": true,
      "maxAttempts": 3,
      "backoff": "exponential"
    },
    "circuitBreaker": {
      "enabled": true,
      "failureThreshold": 5,
      "resetTimeout": 60000
    },
    "rateLimiting": {
      "enabled": true,
      "maxRequests": 100,
      "windowMs": 60000
    }
  },
  "asyncSupport": {
    "polling": {
      "enabled": true,
      "maxWaitTime": 600000,
      "pollInterval": 5000
    },
    "webhooks": {
      "enabled": true,
      "signatureVerification": true
    }
  },
  "batchSupport": {
    "enabled": true,
    "maxConcurrency": 20,
    "orderPreservation": true,
    "inputFormats": ["json", "jsonl", "txt"]
  },
  "security": {
    "inputValidation": true,
    "outputSanitization": true,
    "pathSandboxing": true,
    "maxFileSize": 10485760
  },
  "installation": {
    "methods": ["npm", "bun", "docker"],
    "requirements": {
      "node": ">=18.0.0",
      "bun": ">=1.0.0"
    }
  },
  "testing": {
    "framework": "bun-test",
    "coverage": true,
    "e2e": true
  }
}
